$(function(){banner();initTabs();$('[data-toggle="tooltip"]').tooltip()});function banner(){var myData;var getData=function(callback){if(myData){callback&&callback(myData);return false}$.ajax({url:"js/index.json",data:{},type:"get",dataType:"json",success:function(data){myData=data;callback&&callback(myData)}})};var renderHtml=function(){getData(function(data){var width=$(window).width();var isMobile=false;if(width<768){isMobile=true}var tempaltePoint=_.template($("#template_point").html());var templateImage=_.template($("#template_item").html());var pointHtml=tempaltePoint({model:data});var imageData={list:data,isMobile:isMobile};var imageHtml=templateImage({model:imageData});$(".carousel-indicators").html(pointHtml);$(".carousel-inner").html(imageHtml)})};$(window).on("resize",function(){renderHtml()}).trigger("resize");var startX=0;var moveX=0;var distanceX=0;var isMove=false;$(".wjs_banner").on("touchstart",function(e){startX=e.originalEvent.touches[0].clientX});$(".wjs_banner").on("touchmove",function(e){moveX=e.originalEvent.touches[0].clientX;distanceX=moveX-startX;isMove=true;console.log(distanceX)});$(".wjs_banner").on("touchend",function(e){if(Math.abs(distanceX)>50&&isMove){if(distanceX<0){$(".carousel").carousel("next")}else{$(".carousel").carousel("prev")}}startX=0;moveX=0;distanceX=0;isMove=false})}function initTabs(){var ul=$(".wjs_product .nav-tabs");var lis=ul.find("li");var width=0;$.each(lis,function(i,o){width+=$(o).innerWidth()});ul.width(width);itcast.iScroll({swipeDom:$(".wjs_product_tabsParent").get(0),swipeType:"x",swipeDistance:50})};